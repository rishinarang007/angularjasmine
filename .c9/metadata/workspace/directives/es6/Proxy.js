{"filter":false,"title":"Proxy.js","tooltip":"/directives/es6/Proxy.js","undoManager":{"mark":0,"position":0,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":68,"column":3},"action":"insert","lines":["describe('Proxies', function() {","  ","\tit('should let you intercept gets', function() {","\t\tvar unicorn = {","\t\t\tlegs: 4,","\t\t\tcolor: 'brown',","\t\t\thorn: true","\t\t}","\t\tvar proxyUnicorn = new Proxy(unicorn, {","\t\t\tget: function(target, property) {","\t\t\t\tif(property === 'color') {","\t\t\t\t\treturn 'awesome ' + target[property];","\t\t\t\t} else {","\t\t\t\t\treturn target[property];","\t\t\t\t}","\t\t\t}","\t\t});","","\t\texpect(proxyUnicorn.legs).toBe(4);","\t\texpect(proxyUnicorn.color).toBe('awesome brown');","\t});","","\tit('should let you intercept sets', function() {","\t\tvar unicorn = {","\t\t\tlegs: 4,","\t\t\tcolor: 'brown',","\t\t\thorn: true","\t\t}","\t\tvar proxyUnicorn = new Proxy(unicorn, {","\t\t\tset: function(target, property, value) {","\t\t\t\tif(property === 'horn' && value === false) {","\t\t\t\t\tconsole.log('unicorn cannot ever lose its horn!');","\t\t\t\t} else {","\t\t\t\t\ttarget[property] = value;","\t\t\t\t}","\t\t\t}","\t\t});","","\t\tproxyUnicorn.color = 'white';","\t\tproxyUnicorn.horn = false;","\t\texpect(proxyUnicorn.color).toBe('white');","\t\texpect(proxyUnicorn.horn).toBe(true);","\t})\t","","\tit('should let you proxy functions', function() {","\t\tvar unicorn = {","\t\t\tlegs: 4,","\t\t\tcolor: 'brown',","\t\t\thorn: true,","\t\t\thornAttack: function(target) {","\t\t\t\treturn target.name + ' was obliterated!';","\t\t\t}","\t\t}","\t\tunicorn.hornAttack = new Proxy(unicorn.hornAttack, {","\t\t\tapply: function(target, context, args) {","\t\t\t\tif(context !== unicorn) {","\t\t\t\t\treturn 'nobody can use unicorn horn but unicorn!';","\t\t\t\t} else {","\t\t\t\t\treturn target.apply(context, args);","\t\t\t\t}","\t\t\t}","\t\t});","\t\tvar thief = { name: 'Rupert'}","\t\tthief.attack = unicorn.hornAttack;","\t\texpect(thief.attack()).toBe('nobody can use unicorn horn but unicorn!');","\t\texpect(unicorn.hornAttack(thief)).toBe('Rupert was obliterated!');","\t})","","});"]}]}]]},"ace":{"folds":[],"scrolltop":741,"scrollleft":0,"selection":{"start":{"row":68,"column":3},"end":{"row":68,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":43,"state":"no_regex","mode":"ace/mode/javascript"}},"timestamp":1424261897576,"hash":"e7853a0bdf8d63695a51a8dd0aff54579929a737"}