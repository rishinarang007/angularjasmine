{"filter":false,"title":"promise.js","tooltip":"/directives/es6/promise.js","undoManager":{"mark":30,"position":30,"stack":[[{"group":"doc","deltas":[{"start":{"row":184,"column":16},"end":{"row":185,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":185,"column":0},"end":{"row":186,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":186,"column":0},"end":{"row":257,"column":0},"action":"insert","lines":["(function() {","  var sequence;","  ","  var run = function(generator){","      sequence = generator();","      var next = sequence.next();","  };","  ","  function resume(value) {","    sequence.next(value);","  }","  ","  // STEP ???","  function fail(reason) {","    sequence.throw(reason);","  }","  ","","  window.async = {","  \trun: run,","    resume: resume,","    fail: fail","  }","}());","","function getStockPrice(){","\t","  setTimeout(function(){","    ","    try{     ","     ","    ","      async.resume(50);","        ","    }catch(ex){","    \t\t","      async.fail(ex);","    }","    ","  },500)","","}","","function executeTrade(){","\t","  setTimeout(function(){","  \t\t","    async.resume()","  ","  }, 300)","","}","","","function* main(){","\t","  var price = yield getStockPrice();","  ","  console.log(price)","  ","  if(price > 45){","  \t\t ","    yield executeTrade();","    ","  } else{","    ","  \tconsole.log(\"trade not made\")","  }","}","","async.run(main)",""]}]}],[{"group":"doc","deltas":[{"start":{"row":257,"column":0},"end":{"row":258,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":258,"column":0},"end":{"row":259,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":0},"end":{"row":259,"column":1},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":1},"end":{"row":259,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":2},"end":{"row":259,"column":3},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":3},"end":{"row":259,"column":4},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":4},"end":{"row":259,"column":5},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":5},"end":{"row":259,"column":6},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":6},"end":{"row":259,"column":7},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":7},"end":{"row":259,"column":8},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":8},"end":{"row":259,"column":9},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":9},"end":{"row":259,"column":10},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":10},"end":{"row":259,"column":11},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":11},"end":{"row":259,"column":12},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":12},"end":{"row":259,"column":13},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":13},"end":{"row":259,"column":14},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":14},"end":{"row":259,"column":15},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":15},"end":{"row":259,"column":16},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":16},"end":{"row":259,"column":17},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":17},"end":{"row":259,"column":18},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":18},"end":{"row":259,"column":19},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":19},"end":{"row":259,"column":20},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":20},"end":{"row":259,"column":21},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":21},"end":{"row":259,"column":22},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":22},"end":{"row":259,"column":23},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":23},"end":{"row":259,"column":24},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":259,"column":24},"end":{"row":260,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":260,"column":0},"end":{"row":351,"column":0},"action":"insert","lines":["(function() {"," ","  var run = function(generator){","     var sequence;","    ","    var process = function(result){","    \t\t","      result.value.then(function(value){","      \t\t","        if(!result.done){","        \t\t","          process(sequence.next(value))","        }","      ","      }, function(error){","      \t","         if(!result.done){","        \t\t","          process(sequence.throw(error))","        }","      ","      })","    }","    \t","    sequence = generator();","    var next = sequence.next();","    process(next)","    ","    };","  "," ","","  window.asyncP = {","    ","  \trun: run","  }","  ","}());","","","function getStockPriceP(){","\t","  return new Promise(function(resolve, reject){","  \t","    setTimeout(function(){","    \t\t","      \tresolve(50);","      ","    }, 300)","  ","  })","","}","","function executeTradeP(){","\t"," return new Promise(function(resolve, reject){","  \t","    setTimeout(function(){","    \t\t","      \tresolve();","      ","    }, 300)","    ","  })"," ","}","","","function* main(){","  ","  try{","\t","  var price = yield getStockPriceP();","  ","  console.log(price)","  ","  if(price > 45){","  \t\t ","    yield executeTradeP();","    ","  } else{","    ","  \tconsole.log(\"trade not made\")","  }","  }catch(ex){","  \t\tconsole.log(ex.message)","  }","}","","asyncP.run(main)",""]}]}]]},"ace":{"folds":[],"scrolltop":5835,"scrollleft":0,"selection":{"start":{"row":351,"column":0},"end":{"row":351,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":43,"state":"no_regex","mode":"ace/mode/javascript"}},"timestamp":1424260091610,"hash":"c48e5c03233ed890e051c2a7c9dccfd8d979f293"}